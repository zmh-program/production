import{_ as o,o as e,c as t,b as n,d as s,e as l,a as p,r}from"./app.99aaba7a.js";const c="/quickstart/ghset.png",D="/quickstart/ghset2.png",i="/quickstart/ghset3.png",y="/quickstart/ghset4.png",F="/quickstart/geset.png",C="/quickstart/dnspod.png",J=JSON.parse('{"title":"配置","description":"","frontmatter":{"title":"配置"},"headers":[{"level":2,"title":"🎫 验证码申请","slug":"🎫-验证码申请","link":"#🎫-验证码申请","children":[]},{"level":2,"title":"🥁 OAuth应用申请","slug":"🥁-oauth应用申请","link":"#🥁-oauth应用申请","children":[]},{"level":2,"title":"📫 SMTP邮箱服务器","slug":"📫-smtp邮箱服务器","link":"#📫-smtp邮箱服务器","children":[]},{"level":2,"title":"MySQL 配置","slug":"mysql-配置","link":"#mysql-配置","children":[]},{"level":2,"title":"Redis 配置","slug":"redis-配置","link":"#redis-配置","children":[]},{"level":2,"title":"RabbitMQ 配置","slug":"rabbitmq-配置","link":"#rabbitmq-配置","children":[]},{"level":2,"title":"更多配置","slug":"更多配置","link":"#更多配置","children":[]}],"relativePath":"quickstart/config.md","lastUpdated":1674191530000}'),A={name:"quickstart/config.md"},b=n("h1",{id:"配置",tabindex:"-1"},[s("配置 "),n("a",{class:"header-anchor",href:"#配置","aria-hidden":"true"},"#")],-1),u={class:"table-of-contents"},d={href:"#🎫-验证码申请"},m={href:"#🥁-oauth应用申请"},h={href:"#📫-smtp邮箱服务器"},_={href:"#mysql-配置"},g={href:"#redis-配置"},E={href:"#rabbitmq-配置"},q=n("li",null,[n("a",{href:"#更多配置"},"更多配置")],-1),S=p('<hr><p><a href="https://github.com/zmh-program/Zh-Website/blob/main/config.json" target="_blank" rel="noreferrer">View Config on Github Repo</a></p><div class="tip custom-block"><p class="custom-block-title">配置文件</p><p>配置文件于2.x版本独立，固定于项目根目录的<strong>config.json</strong>文件<br></p><div class="warning custom-block"><p class="custom-block-title">在版本3.x中，因为涉及更加秘密的密钥，因此在原有基础上增加规则</p><p> 在如果项目目录的父目录中存在<strong>config.json</strong>文件，会首先读取，否则读取项目根目录下的文件</p></div></div>',3),T={id:"🎫-验证码申请",tabindex:"-1"},f=n("a",{class:"header-anchor",href:"#🎫-验证码申请","aria-hidden":"true"},"#",-1),v=p(`<p>验证码在<em>2.1</em>版本已经出现，最早使用<strong>simple-captcha</strong>作为校验, 后来于<em>2.4</em>和<em>2.10</em>相继加入<strong>hCaptcha</strong>和<strong>Turnstile</strong></p><p>因为验证的时间问题，每次显式校验需要耗费过多时间, 所以在接下来的版本中使用 <strong>Turnstile</strong>和<strong>hCaptcha</strong>共同校验， <strong>Turnstile</strong>耗时较短，可以设为用户登录后的操作验证, <strong>hCaptcha</strong>耗时较长，可以设为用户注册时的验证</p><p>具体原因即申请流程可以查看我的文章 - <a href="https://blog.csdn.net/m0_60394896/article/details/128429693?spm=1001.2014.3001.5501" target="_blank" rel="noreferrer">《django 人机校验我是人类-使用hCaptcha或Turnstile代替simple-captcha》</a></p><details class="details custom-block"><summary>修改配置</summary><p>申请成功后在<strong>config.json</strong>修改下方配置即可</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">TURNSTILE_SITEKEY</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">TURNSTILE_SECRET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">HCAPTCHA_SITEKEY</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">HCAPTCHA_SECRET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details>`,4),x={id:"🥁-oauth应用申请",tabindex:"-1"},I=n("a",{class:"header-anchor",href:"#🥁-oauth应用申请","aria-hidden":"true"},"#",-1),k=p(`<div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Gitee的OAuth App申请回调地址和落地页不可以写回环地址 <em>(ipv4 - 127.0.0.1, ipv6 - ::1)</em> 以及 <em>localhost</em>， 必须填写合规域名</p><p>如果没有域名或者Development阶段? 修改本机HOSTS地址，使域名在本机被解析成127.0.0.1等等即可</p></div><details class="details custom-block"><summary>修改配置</summary><p>申请成功后在<strong>config.json</strong>修改下方配置即可</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">OAUTH</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">GitHub</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">SITEKEY</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">05b353c81e2c15bf148d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">SECRET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">69e7f754938df94ae9ba9743a48c76a831e9e7cd</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">Gitee</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">SITEKEY</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a0fa985b1e26127f188285d69de2b66b3de8ed03a50e11866acb1a1d595c92fd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">SECRET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3786a2b1f9d6b77e6ba3079613ac4e76ff388b32d98f2d110fa845f1d0eaedc6</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></details><ol><li><h3 id="github" tabindex="-1">Github <a class="header-anchor" href="#github" aria-hidden="true">#</a></h3><ol><li>找到 右上角头像 &gt; 下拉菜单 &gt; Settings设置页面 <img src="`+c+'" alt="ghset"></li><li>Developer Settings &gt; OAuth Apps <img src="'+D+'" alt="ghset2"></li><li>OAuth Apps &gt; New OAuth App <img src="'+i+'" alt="ghset3"></li><li>OAuth App参数类似于 <img src="'+y+'" alt="ghset4"></li><li><strong>生成密钥</strong>, 将Client ID替换到Github的<code>SITEKEY</code>参数, Client Secrets替换到<code>SECRET</code> 参数 <br></li></ol></li><li><h3 id="gitee" tabindex="-1">Gitee <a class="header-anchor" href="#gitee" aria-hidden="true">#</a></h3><ol><li>同上，找到头像下的<strong>账号设置</strong>, 下拉找到<strong>第三方应用</strong></li><li>右上角 <strong>+ 创建应用</strong><img src="'+F+'" alt="ghset4"></li><li>将Client ID替换到Gitee的<code>SITEKEY</code>参数, Client Secret替换到<code>SECRET</code> 参数</li></ol></li></ol><br>',4),R={id:"📫-smtp邮箱服务器",tabindex:"-1"},L=n("a",{class:"header-anchor",href:"#📫-smtp邮箱服务器","aria-hidden":"true"},"#",-1),O=p(`<p>smtp服务器可以自行申请<strong>第三方</strong>smtp邮箱服务器(如qq, 腾讯企业邮箱，阿里, google, 新浪等)，或者自行搭建<strong>postfix域名邮箱</strong></p><details class="details custom-block"><summary>修改配置</summary><p>按照申请得到的参数自行配置<strong>config.json</strong></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EMAIL_HOST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EMAIL_USE_TLS</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EMAIL_PORT</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EMAIL_USER</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">EMAIL_PASSWORD</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details><table><thead><tr><th>参数</th><th>参数说明</th><th>参数类型</th></tr></thead><tbody><tr><td>HOST</td><td>服务商主机</td><td>String</td></tr><tr><td>USE_TLS</td><td>是否使用TLS</td><td>Boolean</td></tr><tr><td>PORT</td><td>端口，基本上为25</td><td>Integer</td></tr><tr><td>USER</td><td>用户名</td><td>String</td></tr><tr><td>PASSWORD</td><td>密码或生成的密钥</td><td>String</td></tr></tbody></table><blockquote><p>使用宝塔为例搭建域名证书 <a href="https://www.xujiahua.com/8844.html" target="_blank" rel="noreferrer">宝塔邮局，让你瞬间拥有无限个域名邮箱! vps上搭建你的私人邮件服务器</a></p><div class="warning custom-block"><p class="custom-block-title">宝塔邮箱管理局安装异常</p><ol><li>更换宝塔通讯节点 (如广州等)</li><li>终端运行</li></ol><div class="language-commandline line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">commandline</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">  sed -i &quot;/bt.cn/d&quot; /etc/hosts</span></span>
<span class="line"><span style="color:#A6ACCD;">  echo &quot;128.1.164.196 www.bt.cn download.bt.cn api.bt.cn dg1.bt.cn dg2.bt.cn&quot; &gt;&gt; /etc/hosts</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><br><a href="https://www.bt.cn/bbs/thread-87257-1-1.html" target="_blank" rel="noreferrer">参见宝塔博客地址</a><br><a href="https://www.bt.cn/bbs/forum.php?mod=viewthread&amp;tid=105912&amp;page=1#pid441294" target="_blank" rel="noreferrer">参见宝塔论坛地址</a></p></div><p><img src="`+C+'" alt="dnspod"><br></p></blockquote>',4),P={id:"mysql-配置",tabindex:"-1"},N=n("a",{class:"header-anchor",href:"#mysql-配置","aria-hidden":"true"},"#",-1),j=p(`<p>默认数据库为: <code>django-database</code></p><div class="tip custom-block"><p class="custom-block-title">版本</p><p>2.x版本默认使用<strong>SQLite3</strong>作为SQL数据库, 不必拥有MySQL外部环境</p><p>3.x/1.x版本同样可以使用SQLite3数据库，自行配置即可</p></div><blockquote><p>创建数据库:</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">django-database</span><span style="color:#89DDFF;">\`</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></blockquote><details class="details custom-block"><summary>修改配置</summary><p>在 <a href="https://github.com/zmh-program/Zh-Website/blob/cb1ae7fe4fbd21868878ab4481e89b0eef077a22/DjangoWebsite/settings.py#L137-L147" target="_blank" rel="noreferrer"><strong>DjangoWebsite/settings.py</strong></a> 修改下方配置</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">DATABASES </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ENGINE</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">django.db.backends.mysql</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># module</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">NAME</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">django-database</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># database name</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">HOST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> MYSQL_HOST</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">PORT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3306</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">USER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">PASSWORD</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zmh200904</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></details><br>`,5),w={id:"redis-配置",tabindex:"-1"},M=n("a",{class:"header-anchor",href:"#redis-配置","aria-hidden":"true"},"#",-1),H=p(`<div class="tip custom-block"><p class="custom-block-title">v2+ 版本</p><p>2.x版本默认使用<strong>LocMem</strong>和<strong>Memcached</strong>作为NoSQL缓存数据库, 不必拥有Redis外部环境</p><p>3.x版本同样可以使用LocMem等缓存数据库，自行配置即可</p></div><div class="warning custom-block"><p class="custom-block-title">v1 版本</p><p>1.x版本的<strong>Django Channels</strong>异步ASGI HTTP/<strong>WS</strong> Server依赖于Redis数据库 <em>(layer)</em></p></div><details class="details custom-block"><summary>修改配置</summary><p>在 <a href="https://github.com/zmh-program/Zh-Website/blob/cb1ae7fe4fbd21868878ab4481e89b0eef077a22/DjangoWebsite/settings.py#L150-L158" target="_blank" rel="noreferrer"><strong>DjangoWebsite/settings.py</strong></a> 修改下方配置</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">CACHES </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">BACKEND</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">django_redis.cache.RedisCache</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">LOCATION</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;redis://</span><span style="color:#F78C6C;">{</span><span style="color:#A6ACCD;">REDIS_HOST</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">:6379/&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">OPTIONS</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">CLIENT_CLASS</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">django_redis.client.DefaultClient</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details><br>`,4),B={id:"rabbitmq-配置",tabindex:"-1"},V=n("a",{class:"header-anchor",href:"#rabbitmq-配置","aria-hidden":"true"},"#",-1),G=p(`<div class="warning custom-block"><p class="custom-block-title">Celery</p><p>v3版本 Celery(分布式消息列队) 依赖 RabbitMQ</p></div><details class="details custom-block"><summary>修改配置</summary><p>在 <a href="https://github.com/zmh-program/Zh-Website/blob/cb1ae7fe4fbd21868878ab4481e89b0eef077a22/DjangoWebsite/settings.py#L160-L168" target="_blank" rel="noreferrer"><strong>DjangoWebsite/settings.py</strong></a> 修改下方配置</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">CELERIES </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">broker</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">HOST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> RABBITMQ_HOST</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">PORT</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5672</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">USER</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">zmh-program</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">PASSWORD</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">zmh200904</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">backend</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rpc://</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details><h2 id="更多配置" tabindex="-1">更多配置 <a class="header-anchor" href="#更多配置" aria-hidden="true">#</a></h2><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># from DjangoWebsite/config.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Haystack &amp; Blog Settings</span></span>
<span class="line"><span style="color:#A6ACCD;">HAYSTACK_CONNECTIONS </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ENGINE</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">blog.backend.jieba_whoosh_backend.WhooshEngine</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">PATH</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">BASE_DIR</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">whoosh_index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">HAYSTACK_SIGNAL_PROCESSOR </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">haystack.signals.RealtimeSignalProcessor</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">HAYSTACK_SEARCH_RESULTS_PER_PAGE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> BLOG_PAGINATION </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#  File Settings</span></span>
<span class="line"><span style="color:#A6ACCD;">FILE_DATABASE_DIR </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">BASE_DIR</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">files</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">database</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">MAX_FILE_NAME_LENGTH </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span></span>
<span class="line"><span style="color:#A6ACCD;">FILE_CACHE_CAPABILITY </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span></span>
<span class="line"><span style="color:#A6ACCD;">FILE_PAGINATION </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># nums per page</span></span>
<span class="line"><span style="color:#A6ACCD;">FILE_PERMISSION_LEVEL </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span></span>
<span class="line"><span style="color:#A6ACCD;">SIZE_UNIT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1024</span></span>
<span class="line"><span style="color:#A6ACCD;">MAX_FILE_SIZE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">1024</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 10 MiB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># GeoIP Settings</span></span>
<span class="line"><span style="color:#A6ACCD;">GEOIP_RELEASE_INTERVAL </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 6 hours</span></span>
<span class="line"><span style="color:#A6ACCD;">GEOIP_DATABASE_FILE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">BASE_DIR</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">geoip</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">database</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">geolite.mmdb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># JWT Settings</span></span>
<span class="line"><span style="color:#A6ACCD;">TOKEN_VALID_TIME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># unit: seconds</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Monitor Settings</span></span>
<span class="line"><span style="color:#A6ACCD;">MONITOR_INTERVAL </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 1 second</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># OAuth:</span></span>
<span class="line"><span style="color:#A6ACCD;">OAUTH_CONFIG </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> _config</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">OAUTH</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DEFAULT_HOST </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">DEFAULT_PORT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8000</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// from config.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">SECRET_KEY</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">django-insecure-#l#3ps7+(*+7f#0cz=aj-sp!6$-waaf6h=*+=5h*(5njj_^)@8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">ALLOWED_HOSTS</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>`,5);function W(U,Q,K,Y,z,Z){const a=r("Badge");return e(),t("div",null,[b,n("nav",u,[n("ul",null,[n("li",null,[n("a",d,[s("🎫 验证码申请 "),l(a,{type:"tip",text:"3.x"}),s(),l(a,{type:"tip",text:"2.x"})])]),n("li",null,[n("a",m,[s("🥁 OAuth应用申请 "),l(a,{type:"tip",text:"3.x"}),s(),l(a,{type:"tip",text:"2.x"})])]),n("li",null,[n("a",h,[s("📫 SMTP邮箱服务器 "),l(a,{type:"tip",text:"3.x"})])]),n("li",null,[n("a",_,[s("MySQL 配置 "),l(a,{type:"tip",text:"3.x"}),s(),l(a,{type:"info",text:"2.x"}),s(),l(a,{type:"tip",text:"1.x"})])]),n("li",null,[n("a",g,[s("Redis 配置 "),l(a,{type:"tip",text:"3.x"}),s(),l(a,{type:"info",text:"2.x"}),s(),l(a,{type:"tip",text:"1.x"})])]),n("li",null,[n("a",E,[s("RabbitMQ 配置 "),l(a,{type:"tip",text:"3.x"})])]),q])]),S,n("h2",T,[s("🎫 验证码申请 "),l(a,{type:"tip",text:"3.x"}),s(),l(a,{type:"tip",text:"2.x"}),s(),f]),v,n("h2",x,[s("🥁 OAuth应用申请 "),l(a,{type:"tip",text:"3.x"}),s(),l(a,{type:"tip",text:"2.x"}),s(),I]),k,n("h2",R,[s("📫 SMTP邮箱服务器 "),l(a,{type:"tip",text:"3.x"}),s(),L]),O,n("h2",P,[s("MySQL 配置 "),l(a,{type:"tip",text:"3.x"}),s(),l(a,{type:"info",text:"2.x"}),s(),l(a,{type:"tip",text:"1.x"}),s(),N]),j,n("h2",w,[s("Redis 配置 "),l(a,{type:"tip",text:"3.x"}),s(),l(a,{type:"info",text:"2.x"}),s(),l(a,{type:"tip",text:"1.x"}),s(),M]),H,n("h2",B,[s("RabbitMQ 配置 "),l(a,{type:"tip",text:"3.x"}),s(),V]),G])}const X=o(A,[["render",W]]);export{J as __pageData,X as default};
